---
title: "De Cero a H√©roe: Crea un Snake Game Cyberpunk con Ranking en Tiempo Real usando Supabase y JS Vanilla"
date: 2026-01-17
draft: false
categories: ["Desarrollo Web", "GameDev", "Tutoriales"]
tags: ["JavaScript", "Supabase", "PostgreSQL", "Canvas", "HTML5", "TailwindCSS"]
image: /images/neon-snake-header.jpg
description: "Aprende a crear un juego web estilo arcade con est√©tica ne√≥n utilizando solo HTML5 Canvas y JS Vanilla. Descubre c√≥mo integrar un ranking global en tiempo real usando la base de datos PostgreSQL de Supabase."
summary: "¬øRecuerdas el cl√°sico Snake? Lo hemos tra√≠do al futuro con est√©tica Cyberpunk y lo hemos conectado a la nube. En este tutorial 'De Cero a H√©roe', aprender√°s a construir 'Neon Snake' usando JS Vanilla para el juego y Supabase para persistir las puntuaciones en tiempo real, sin necesidad de montar un servidor backend complejo."
---

¬øRecuerdas el cl√°sico Snake de los viejos Nokia? Ahora imag√≠nalo con luces de ne√≥n, m√∫sica sintetizada, part√≠culas explosivas y, lo m√°s importante: **conectado a la nube**.

El desarrollo de videojuegos web ha vivido un renacimiento gracias a la potencia de HTML5 Canvas y las herramientas **Serverless**. Antiguamente, si quer√≠as guardar las puntuaciones de tus jugadores para hacer un ranking global, necesitabas montar un servidor, configurar una API REST, gestionar bases de datos y pagar un hosting. Hoy, gracias al Backend-as-a-Service (BaaS), podemos hacerlo en minutos.

En este tutorial, vamos a construir **"Neon Snake"**, un arcade web est√©tico y funcional que utiliza **Supabase** (una alternativa Open Source a Firebase) para persistir datos en PostgreSQL.

![Conceptual image of Snake Game](imagen_snake_game.png)

## üõ†Ô∏è El Stack Tecnol√≥gico

Vamos a mantenerlo simple pero potente. Sin frameworks pesados, solo la pureza de la web:

* **Frontend:** HTML5 Canvas + JavaScript Vanilla (ES6+).
* **Estilos:** Tailwind CSS (v√≠a CDN) para la interfaz de usuario.
* **Backend:** Supabase (PostgreSQL + Realtime).
* **Audio:** Web Audio API para efectos de sonido generados por c√≥digo.

---

## Paso 1: Configurando el Backend con Supabase

Antes de escribir una sola l√≠nea de JavaScript, necesitamos nuestro cerebro en la nube. Supabase nos ofrece una base de datos PostgreSQL real con una API generada autom√°ticamente.

1.  Crea una cuenta gratuita en [supabase.com](https://supabase.com).
2.  Crea un nuevo proyecto llamado `NeonSnake`.
3.  Ve a la secci√≥n **Table Editor** y crea una nueva tabla llamada `snake_scores`.

### La Magia del SQL

Para agilizar el proceso, Supabase te permite ejecutar comandos SQL directamente. Ve al **SQL Editor** y pega el siguiente c√≥digo. Esto crear√° la estructura de la tabla y configurar√° las pol√≠ticas de seguridad (RLS - Row Level Security) para que tu juego pueda leer y escribir datos p√∫blicamente.

```sql
-- 1. Crear la tabla de puntuaciones
create table snake_scores (
  id bigint generated by default as identity primary key,
  username text not null,
  score integer not null,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 2. Habilitar seguridad a nivel de fila (RLS)
alter table snake_scores enable row level security;

-- 3. Pol√≠tica para permitir que cualquiera vea el ranking (Lectura p√∫blica)
create policy "Ver ranking publico"
on snake_scores for select
using ( true );

-- 4. Pol√≠tica para permitir que cualquiera guarde su r√©cord (Escritura p√∫blica)
create policy "Guardar puntuacion"
on snake_scores for insert
with check ( true );
```

> **Nota de Seguridad:** En un juego comercial, usar√≠amos autenticaci√≥n de usuarios completa. Para este arcade tipo demo, permitimos el acceso p√∫blico (an√≥nimo) para reducir la fricci√≥n y que cualquiera pueda jugar y registrar su r√©cord al instante.

Finalmente, ve a **Settings > API** y copia tu `Project URL` y tu `anon public key`. Las necesitar√°s en breve.

---

## Paso 2: El Frontend Cyberpunk (HTML5 + Canvas)

Nuestro juego vivir√° en un solo archivo `index.html`. Usaremos **Tailwind CSS** para los men√∫s flotantes (Game Over, Start Screen) y el elemento `<canvas>` para renderizar el juego a 60 FPS.

La estructura b√°sica es la siguiente:

```html
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Neon Snake 2077</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        body { font-family: 'Orbitron', sans-serif; background-color: #050505; }
        /* Efecto de brillo de ne√≥n para el canvas */
        canvas { box-shadow: 0 0 20px #0ff; border: 2px solid #0ff; }
    </style>
</head>
<body class="h-screen w-full flex items-center justify-center overflow-hidden bg-gray-900">

    <div class="relative">
        <canvas id="gameCanvas" width="400" height="400"></canvas>
        
        <div id="gameOverMenu" class="hidden absolute inset-0 bg-black/90 flex flex-col items-center justify-center z-10">
            <h2 class="text-4xl text-red-500 font-bold mb-4 drop-shadow-[0_0_10px_rgba(239,68,68,0.8)]">SYSTEM FAILURE</h2>
            <input type="text" id="usernameInput" placeholder="Enter ID..." class="bg-gray-800 text-cyan-400 p-2 rounded border border-cyan-500 mb-4 text-center outline-none">
            <button id="saveBtn" class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-2 px-4 rounded shadow-[0_0_15px_#06b6d4] transition-all">
                UPLOAD DATA
            </button>
            
            <div id="leaderboard" class="mt-6 text-sm text-gray-300 w-64 text-left h-40 overflow-y-auto custom-scrollbar"></div>
        </div>
    </div>

    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
        
        // ... L√≥gica del juego aqu√≠ (Ver paso 3) ...
    </script>
</body>
</html>
```

### L√≥gica del Juego: M√°s all√° de comer manzanas

Para darle ese toque "Pro" y diferenciarlo de un tutorial b√°sico, implementamos varias mec√°nicas clave en el JavaScript:

1.  **Loop de Animaci√≥n:** Usando `requestAnimationFrame` para mantener la fluidez a 60 FPS.
2.  **Sistema de Part√≠culas:** Un array de objetos que se generan en las coordenadas de la "comida" al ser ingerida y se desvanecen gradualmente, simulando una explosi√≥n de datos.
3.  **Firewalls Din√°micos:** A partir del nivel 5, generamos obst√°culos est√°ticos que el jugador debe esquivar, aumentando la dificultad progresivamente.
4.  **Controles H√≠bridos:**
    * **PC:** Escuchamos eventos `keydown` para las flechas direccionales.
    * **M√≥vil:** Capturamos `touchstart` y `touchend` para calcular la direcci√≥n del gesto (*swipe*) y mover la serpiente.

---

## Paso 3: Conectando los puntos (Integraci√≥n con Supabase)

Aqu√≠ es donde ocurre la magia del Backend-as-a-Service. Vamos a conectar nuestro Canvas con la base de datos PostgreSQL. Dentro de nuestra etiqueta `<script type="module">`:

### 1. Inicializaci√≥n del Cliente

```javascript
const supabaseUrl = 'TU_PROYECTO_SUPABASE_URL';
const supabaseKey = 'TU_SUPABASE_ANON_KEY';
const supabase = createClient(supabaseUrl, supabaseKey);
```

### 2. El Flujo de "Game Over"

Cuando el jugador pierde y pulsa "UPLOAD DATA", necesitamos asegurarnos de que el dato se guarda antes de mostrar la tabla de clasificaci√≥n. Usaremos `async/await` para controlar este flujo as√≠ncrono.

```javascript
async function saveScore(username, score) {
    // 1. Guardar la puntuaci√≥n
    const { error } = await supabase
        .from('snake_scores')
        .insert([{ username: username, score: score }]);

    if (error) {
        console.error('Error al subir datos:', error);
        alert('Error de conexi√≥n con el servidor central.');
        return;
    }
    
    // 2. Inmediatamente despu√©s, actualizamos el ranking visualmente
    fetchLeaderboard();
}
```

### 3. Obtener el Ranking (Select)

Recuperamos el **Top 20** ordenado por puntuaci√≥n descendente para mostrar qui√©n manda en el servidor.

```javascript
async function fetchLeaderboard() {
    const { data: scores, error } = await supabase
        .from('snake_scores')
        .select('username, score')
        .order('score', { ascending: false }) // Orden descendente
        .limit(20);                           // Solo los 20 mejores

    if (error) console.error('Error fetching leaderboard:', error);
    
    // Renderizar en el DOM
    const list = document.getElementById('leaderboard');
    list.innerHTML = '<h3 class="text-cyan-400 border-b border-cyan-500 mb-2 font-bold">TOP HACKERS</h3>';
    
    scores.forEach((entry, index) => {
        // Destacar el top 3 con colores diferentes si quieres
        const colorClass = index < 3 ? 'text-yellow-400' : 'text-gray-300';
        
        list.innerHTML += `
            <div class="flex justify-between py-1 border-b border-gray-800">
                <span class="${colorClass}">#${index + 1} ${entry.username}</span>
                <span class="text-cyan-300 font-mono">${entry.score}</span>
            </div>`;
    });
}
```

### Bonus: Realtime ‚ö°

¬øQuieres que el ranking se actualice en la pantalla de **todos** los jugadores conectados si alguien rompe el r√©cord en ese preciso instante? Supabase hace esto trivial con sus suscripciones:

```javascript
// Suscribirse a cambios en la tabla 'snake_scores'
supabase
  .channel('public:snake_scores')
  .on('postgres_changes', 
      { event: 'INSERT', schema: 'public', table: 'snake_scores' }, 
      (payload) => {
        console.log('¬°Nuevo r√©cord detectado en la red!', payload);
        fetchLeaderboard(); // Refresca la lista autom√°ticamente para todos
      }
  )
  .subscribe();
```

---

## El Resultado Final

Al unir todo, obtienes una experiencia de usuario fluida y altamente competitiva:

1.  El usuario juega fren√©ticamente esquivando "Firewalls" de ne√≥n.
2.  Al chocar, el juego se detiene con un efecto visual de "glitch".
3.  Introduce su nombre (ej: "Neo").
4.  Al pulsar enviar, **en milisegundos**, su nombre aparece en la tabla de clasificaci√≥n.
5.  Si su amigo est√° jugando en otro m√≥vil al mismo tiempo, ver√° el nombre de "Neo" aparecer en su pantalla sin recargar la p√°gina.

## Conclusi√≥n

Hemos pasado de un simple canvas est√°tico a una aplicaci√≥n **Fullstack** en tiempo real sin tocar un servidor backend tradicional (Node.js, PHP, Python) ni gestionar infraestructura. La combinaci√≥n de la creatividad del desarrollo de videojuegos con la potencia de herramientas BaaS como Supabase abre un mundo de posibilidades para desarrolladores frontend.

**¬øEl siguiente paso?** Te invito a clonar el proyecto y mejorarlo: a√±ade autenticaci√≥n con GitHub para evitar nombres duplicados, crea skins para la serpiente que se desbloqueen con la puntuaci√≥n, o implementa un modo multijugador usando los canales de presencia de Supabase.

¬°El c√≥digo es tuyo! üêçüíª

---
*¬øTe ha gustado este tutorial? Comp√°rtelo en tus redes con tus High Scores y no olvides revisar la documentaci√≥n oficial de Supabase para profundizar m√°s.*