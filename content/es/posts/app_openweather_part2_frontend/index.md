---
title: "Proyecto Weather Service (Parte 2): Construyendo el Frontend Interactivo con GitHub Pages y JavaScript"
date: 2025-11-04
draft: False
categories: ["Proyectos", "Herramientas"]
tags: ["javascript", "frontend", "github pages", "html", "css", "papaparse", "chartjs", "serverless", "visualizacion-datos"]
image: weather_frontend_dashboard.png
description: "Segunda entrega del proyecto Weather Service. Nos adentramos en el frontend: sirviendo un dashboard din√°mico con GitHub Pages, leyendo datos CSV con PapaParse.js y creando gr√°ficos interactivos con Chart.js."
summary: "Despu√©s de construir el recolector de datos, ¬°es hora de visualizarlos! Este post te gu√≠a a trav√©s de la creaci√≥n de un dashboard meteorol√≥gico interactivo usando GitHub Pages, JavaScript, PapaParse.js y Chart.js. ¬°Dale vida a tus datos!"
---

En la [primera parte de esta serie](/blog/weather-service-part-1-backend), sentamos las bases de nuestro servicio meteorol√≥gico global. Construimos un script de Python para obtener datos del clima de OpenWeatherMap, los almacenamos eficientemente en ficheros CSV separados por ciudad y automatizamos todo el proceso de recolecci√≥n utilizando GitHub Actions. Nuestro "robot" est√° diligentemente recopilando datos 24/7.

Pero, ¬øde qu√© sirven los datos si no puedes verlos? Hoy, cambiamos nuestro enfoque al **frontend**: la construcci√≥n de un dashboard interactivo y f√°cil de usar que permita a cualquiera explorar los datos meteorol√≥gicos que hemos recopilado. Aprovecharemos el poder del alojamiento de sitios est√°ticos con **GitHub Pages**, utilizaremos **JavaScript** "vainilla" para darle vida y nos apoyaremos en algunas excelentes librer√≠as para el manejo y la visualizaci√≥n de datos. ¬°Hagamos que nuestros datos brillen!

---

### Alojamiento Web Gratuito: GitHub Pages

El primer obst√°culo para cualquier proyecto web es el alojamiento. Los servidores tradicionales pueden ser costosos y complejos de gestionar. Siguiendo nuestra filosof√≠a "serverless y gratis", **GitHub Pages** es la soluci√≥n perfecta. Permite alojar sitios web est√°ticos directamente desde tu repositorio de GitHub.

**La activaci√≥n es trivial:**
1.  Ve a `Settings > Pages` en tu repositorio.
2.  Selecciona tu rama `main` (o la rama que contenga tu contenido web) como fuente.
3.  Elige la carpeta `/root` (o una carpeta `/docs` si lo prefieres) como la ubicaci√≥n de tus archivos web.
4.  Haz clic en `Save`.

Y as√≠, tu archivo `index.html` (y cualquier recurso vinculado) se vuelve accesible p√∫blicamente en una URL como `https://tu-usuario.github.io/tu-nombre-de-repositorio/`. ¬°Sencillo, efectivo y gratuito\! üöÄ

---

### La Pila Tecnol√≥gica del Frontend: HTML, CSS y JavaScript (con una peque√±a ayuda)

Para este dashboard, opt√© por un enfoque ligero: HTML puro para la estructura, un poco de CSS para los estilos y **JavaScript "vainilla"** (sin frameworks complejos) para la interactividad. Para manejar tareas espec√≠ficas, incorpor√© dos librer√≠as fant√°sticas:

1.  [**PapaParse.js**](https://www.papaparse.com/): El mejor parser de CSV del lado del cliente para el navegador. Es el puente entre nuestros archivos CSV en bruto y las estructuras de datos de JavaScript que necesitamos para la visualizaci√≥n.
2.  [**Chart.js**](https://www.chartjs.org/): Una potente y flexible librer√≠a de gr√°ficos JavaScript que facilita enormemente la creaci√≥n de gr√°ficos bonitos, responsivos e interactivos.

---

### La L√≥gica del Dashboard: Dando Vida a los Datos en `index.html`

Nuestro `index.html` act√∫a como el lienzo principal, orquestando la obtenci√≥n, el parseo y la representaci√≥n de los datos meteorol√≥gicos.

#### 1. Carga Din√°mica de Ciudades

En lugar de codificar una lista de ciudades, queremos que nuestro dashboard se actualice autom√°ticamente si a√±adimos nuevas ciudades en el backend. Lo logramos obteniendo un simple archivo `ciudades.txt` (que contiene un nombre de ciudad por l√≠nea) y poblando din√°micamente un elemento desplegable `<select>` utilizando la API `fetch` de JavaScript.

```javascript
const citySelector = document.getElementById('citySelector');
let myChart = null; // Variable global para almacenar la instancia de Chart.js

async function cargarListaCiudades() {
    try {
        const response = await fetch('ciudades.txt');
        const text = await response.text();
        // Filtramos las l√≠neas vac√≠as del archivo de texto
        const ciudades = text.split('\n').filter(line => line.trim() !== '');

        ciudades.forEach(ciudad => {
            const option = document.createElement('option');
            option.value = ciudad;
            option.textContent = ciudad;
            citySelector.appendChild(option);
        });

        // Cargamos la primera ciudad por defecto al inicio de la p√°gina
        if (ciudades.length > 0) {
            cargarYDibujarDatos(ciudades[0]);
        }
    } catch (error) {
        console.error('Error cargando la lista de ciudades:', error);
        // Opcional: Mostrar un mensaje de error amigable al usuario
    }
}

// Disparamos la carga de ciudades cuando el DOM est√© completamente cargado
document.addEventListener('DOMContentLoaded', cargarListaCiudades);
```

#### 2. Reacci√≥n a la Selecci√≥n del Usuario

Cuando un usuario selecciona una ciudad del desplegable, necesitamos responder de inmediato. Un `addEventListener` en el elemento `<select>` detecta el evento `change` y llama a nuestra funci√≥n principal para obtener y dibujar los datos de la ciudad reci√©n seleccionada.

```javascript
citySelector.addEventListener('change', (event) => {
    const ciudadSeleccionada = event.target.value;
    cargarYDibujarDatos(ciudadSeleccionada);
});
```

#### 3. Obtenci√≥n, Parseo y Dibujado de Datos

Esta es la funci√≥n central donde todo cobra vida. Es responsable de:

  * Construir la URL para el archivo CSV espec√≠fico de la ciudad (ej., `datos/Le√≥n.csv`).
  * Utilizar `Papa.parse` para descargar y procesar el contenido del CSV directamente en el navegador. PapaParse maneja la obtenci√≥n y el parseo as√≠ncronos, lo que lo hace incre√≠blemente f√°cil.
  * Extraer las `etiquetas` (fechas) y los `datos` (temperaturas) relevantes del CSV parseado para Chart.js.
  * **¬°Crucial\!**: Antes de dibujar un nuevo gr√°fico, debemos **destruir la instancia anterior de Chart.js** (`if (myChart) { myChart.destroy(); }`). ¬°Olvidar este paso lleva a gr√°ficos superpuestos y problemas de rendimiento! üí•
  * Crear una nueva instancia de `Chart()` con los datos actualizados.
  * Adicionalmente, llama a una funci√≥n para cargar y mostrar la predicci√≥n de IA para esa ciudad, integr√°ndola sin problemas en el dashboard.

```javascript
function cargarYDibujarDatos(ciudad) {
    const csvUrl = `datos/${ciudad}.csv`; // Nota la carpeta 'datos/' de la Parte 1
    const ctx = document.getElementById('weatherChart').getContext('2d');

    Papa.parse(csvUrl, {
        download: true, // Indica a PapaParse que descargue el archivo
        header: true,   // Trata la primera fila como encabezados
        skipEmptyLines: true,
        complete: function(results) {
            const datosClimaticos = results.data;

            // Extraer etiquetas (fechas) y datos (temperaturas)
            const etiquetas = datosClimaticos.map(fila => fila.fecha_hora.split(' ')[0]); // Extraer solo la fecha
            const tempMax = datosClimaticos.map(fila => parseFloat(fila.temp_max_c));
            const tempMin = datosClimaticos.map(fila => parseFloat(fila.temp_min_c));

            // Destruir la instancia de gr√°fico anterior si existe para evitar superposiciones
            if (myChart) {
                myChart.destroy();
            }

            // Crear una nueva instancia de Chart.js
            myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: etiquetas,
                    datasets: [{
                        label: `Temp M√°x (¬∞C) - ${ciudad}`,
                        data: tempMax,
                        borderColor: 'rgb(255, 99, 132)',
                        tension: 0.1
                    }, {
                        label: `Temp M√≠n (¬∞C) - ${ciudad}`,
                        data: tempMin,
                        borderColor: 'rgb(54, 162, 235)',
                        tension: 0.1
                    }]
                },
                options: { // Opciones del gr√°fico para responsividad, t√≠tulo, etc.
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: false } },
                    plugins: { legend: { position: 'top' }, title: { display: true, text: `Datos Hist√≥ricos del Clima para ${ciudad}` } }
                }
            });

            // Cargar y mostrar la predicci√≥n de IA
            cargarPrediccion(ciudad);
        },
        error: function(err, file) {
            console.error("Error al parsear el CSV:", err, file);
            // Opcional: mostrar un mensaje de error amigable en el dashboard
            if (myChart) { myChart.destroy(); } // Limpiar gr√°fico si falla la carga
        }
    });
}
```

#### 4. Mostrar Predicciones de IA

La integraci√≥n de las predicciones de IA (en las que profundizaremos en la Parte 3) tambi√©n se gestiona desde el frontend. El backend genera un archivo `predicciones.json`, y nuestro JavaScript simplemente obtiene este JSON, encuentra la predicci√≥n para la ciudad seleccionada y la muestra.

```javascript
async function cargarPrediccion(ciudad) {
    const predictionElement = document.getElementById('prediction');
    try {
        const response = await fetch('predicciones.json');
        const predicciones = await response.json();
        if (predicciones && predicciones[ciudad]) {
             predictionElement.textContent = `Predicci√≥n de Temp. M√°x. para ma√±ana: ${predicciones[ciudad].toFixed(1)}¬∞C`;
        } else {
             predictionElement.textContent = 'Predicci√≥n no disponible.';
        }
    } catch (error) {
         console.error('Error cargando predicciones:', error);
         predictionElement.textContent = 'Error al cargar la predicci√≥n.';
    }
}
```

---

### Conclusi√≥n (Parte 2)

¬°Hemos transformado los datos en bruto en una experiencia atractiva e interactiva! Al combinar GitHub Pages para el alojamiento, JavaScript "vainilla" para la l√≥gica, PapaParse.js para el manejo de CSV y Chart.js para visualizaciones hermosas, hemos construido un frontend potente que es a la vez gratuito y muy efectivo.

El dashboard ahora proporciona informaci√≥n inmediata sobre los patrones clim√°ticos hist√≥ricos de cualquier ciudad seleccionada. Pero, ¬øqu√© pasa con el futuro? En la **tercera y √∫ltima parte de esta serie**, nos adentraremos en el emocionante mundo del **Machine Learning** para a√±adir una capa predictiva a nuestro servicio. Exploraremos c√≥mo usar datos hist√≥ricos para pronosticar el tiempo de ma√±ana, convirtiendo nuestro servicio en un verdadero "or√°culo" meteorol√≥gico. ¬°No te lo pierdas!

---

### Referencias y Enlaces de Inter√©s:

* **Servicio Web Completo**: Puedes ver el resultado final de este proyecto en acci√≥n aqu√≠: [https://dalaez.github.io/app_weather/](https://dalaez.github.io/app_weather/)
* **Repositorio GitHub del Proyecto**: Explora el c√≥digo fuente y la estructura del proyecto en mi repositorio: [https://github.com/Dalaez/app_weather](https://github.com/Dalaez/app_weather)
* **PapaParse.js**: Parser de CSV r√°pido en el navegador para JavaScript: [https://www.papaparse.com/](https://www.papaparse.com/)
* **Chart.js**: Gr√°ficos JavaScript simples pero flexibles para dise√±adores y desarrolladores: [https://www.chartjs.org/](https://www.chartjs.org/)
* **GitHub Pages**: Documentaci√≥n oficial sobre c√≥mo alojar tus sitios: [https://docs.github.com/es/pages](https://docs.github.com/es/pages)